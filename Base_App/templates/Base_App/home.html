{% extends "Base_App/base.html" %}

{% block home_status %}active{% endblock home_status %}

{% load static %}

{% block slider %}
<!-- Hero Slider Section -->
<section class="slider_section">
    <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <!-- Carousel Indicators -->
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        
        <!-- Carousel Items -->
        <div class="carousel-inner">
            <!-- Slide 1 -->
            <div class="carousel-item active">
                <div class="container">
                    <div class="row align-items-center min-vh-75">
                        <div class="col-md-7 col-lg-6">
                            <div class="hero-content">
                                <h1 class="hero-title display-4 fw-bold mb-3">
                                    Fast Food Restaurant
                                </h1>
                                <p class="hero-text lead mb-4">
                                    Welcome to our quick-service restaurant, where delicious meets convenient! We pride ourselves on using quality ingredients to create mouthwatering meals served with lightning-fast efficiency.
                                </p>
                                <div class="hero-actions">
                                    <a href="{% url 'Menu' %}" class="btn btn-primary btn-lg px-4 py-2">
                                        Order Now
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 2 -->
            <div class="carousel-item">
                <div class="container">
                    <div class="row align-items-center min-vh-75">
                        <div class="col-md-7 col-lg-6">
                            <div class="hero-content">
                                <h1 class="hero-title display-4 fw-bold mb-3">
                                    Fast Food Restaurant
                                </h1>
                                <p class="hero-text lead mb-4">
                                    Hungry doesn't have to mean waiting. Our kitchen turns out fresh, flavorful meals at the speed of your cravings. From cheesy favorites to hearty classics, everything we serve is made with care and ready when you are.
                                </p>
                                <div class="hero-actions">
                                    <a href="{% url 'Menu' %}" class="btn btn-primary btn-lg px-4 py-2">
                                        Order Now
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 3 -->
            <div class="carousel-item">
                <div class="container">
                    <div class="row align-items-center min-vh-75">
                        <div class="col-md-7 col-lg-6">
                            <div class="hero-content">
                                <h1 class="hero-title display-4 fw-bold mb-3">
                                    Fast Food Restaurant
                                </h1>
                                <p class="hero-text lead mb-4">
                                    Welcome in. We're all about good food made simpleâ€”fresh ingredients, bold flavors, and quick service. Whether you're grabbing a bite on the go or settling in with friends, we've got something that'll hit the spot.
                                </p>
                                <div class="hero-actions">
                                    <a href="{% url 'Menu' %}" class="btn btn-primary btn-lg px-4 py-2">
                                        Order Now
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Carousel Controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>
<!-- End Hero Slider Section -->
{% endblock slider %}

{% block main %}
<!-- Special Offers Section -->
<section class="offers-section py-5">
    <div class="container">
        <!-- Section Header -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title display-5 fw-bold mb-3">Special Offers</h2>
                <p class="section-subtitle lead text-muted">Don't miss our limited-time deals</p>
            </div>
        </div>

        <!-- Offers Grid -->
        <div class="row g-4">
            {% for offer in offers %}
                <div class="col-md-6 col-lg-4">
                    <div class="offer-card card h-100 border-0 shadow-sm overflow-hidden">
                        <!-- Offer Image -->
                        <div class="offer-image position-relative">
                            {% if offer.image %}
                                <img src="{{ offer.image.url }}" class="card-img-top" alt="{{ offer.title }}">
                            {% else %}
                                <img src="{% static 'images/o' %}{{ forloop.counter }}.jpg" class="card-img-top" alt="{{ offer.title }}">
                            {% endif %}
                            
                            <!-- Discount Badge -->
                            <div class="offer-badge position-absolute top-0 end-0 bg-danger text-white px-3 py-2 m-3 rounded-pill fw-bold">
                                {{ offer.discount_percent }}% OFF
                            </div>
                        </div>
                        
                        <!-- Offer Content -->
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title fw-bold">{{ offer.title }}</h5>
                            
                            {% if offer.description %}
                                <p class="card-text text-muted mb-3">{{ offer.description }}</p>
                            {% endif %}
                            
                            <div class="offer-details mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="text-primary fw-bold fs-5">{{ offer.discount_percent }}% Off</span>
                                    <small class="text-muted">Valid until: {{ offer.end_date|date:"F j, Y" }}</small>
                                </div>
                                
                                <a href="{% url 'Menu' %}" class="btn btn-primary w-100 d-flex align-items-center justify-content-center">
                                    <span>Order Now</span>
                                    <i class="fas fa-shopping-cart ms-2"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            
            {% empty %}
                <!-- Fallback content if no offers are available -->
                <div class="col-12 text-center py-5">
                    <div class="no-offers-message">
                        <i class="fas fa-tag display-1 text-muted mb-3"></i>
                        <h4 class="mb-3">No current offers</h4>
                        <p class="text-muted mb-4">Check back soon for special promotions!</p>
                        <a href="{% url 'Menu' %}" class="btn btn-primary">View Our Menu</a>
                    </div>
                </div>
            {% endfor %}
        </div>

        <!-- View All Offers Link -->
        {% if offers.count > 3 %}
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <a href="{% url 'Menu' %}" class="btn btn-outline-primary btn-lg">View All Offers</a>
                </div>
            </div>
        {% endif %}
    </div>
</section>
<!-- End Special Offers Section -->

<!-- Menu Section -->
<section class="menu-section py-5 bg-light">
    <div class="container">
        <!-- Section Header -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title display-5 fw-bold mb-3">Our Menu</h2>
                <p class="section-subtitle lead text-muted">Discover our delicious offerings</p>
            </div>
        </div>

        <!-- Category Filter Tabs -->
        <div class="row mb-4">
            <div class="col-12">
                <ul class="nav nav-pills justify-content-center flex-wrap" id="categoryTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all" type="button" role="tab" aria-controls="all" aria-selected="true">
                            All
                        </button>
                    </li>
                    {% for category in categories %}
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="{{ category.slug }}-tab" data-bs-toggle="tab" data-bs-target="#{{ category.slug }}" type="button" role="tab" aria-controls="{{ category.slug }}" aria-selected="false">
                                {{ category.Category_name }}
                            </button>
                        </li>
                    {% empty %}
                        <li class="nav-item">
                            <span class="nav-link disabled">No categories available</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- Menu Items Grid -->
        <div class="tab-content" id="categoryTabContent">
            <!-- All Items Tab -->
            <div class="tab-pane fade show active" id="all" role="tabpanel" aria-labelledby="all-tab">
                <div class="row g-4">
                    {% for item in items %}
                        <div class="col-md-6 col-lg-4 col-xl-3">
                            <div class="menu-item card h-100 border-0 shadow-sm overflow-hidden">
                                <!-- Item Image -->
                                <div class="item-image position-relative overflow-hidden">
                                    {% if item.Image %}
                                        <img src="{{ item.Image.url }}" class="card-img-top" alt="{{ item.Item_name }}">
                                    {% else %}
                                        <img src="{% static 'images/default_item.png' %}" class="card-img-top" alt="No image available">
                                    {% endif %}
                                </div>
                                
                                <!-- Item Details -->
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title fw-bold">{{ item.Item_name }}</h5>
                                    
                                    {% if item.description %}
                                        <p class="card-text text-muted flex-grow-1">{{ item.description }}</p>
                                    {% endif %}
                                    
                                    <div class="item-actions d-flex justify-content-between align-items-center mt-auto">
                                        <span class="price fw-bold text-primary">${{ item.Price }}</span>
                                        <form action="{% url 'add_to_cart' item.id %}" method="post" class="d-inline">
                                            {% csrf_token %}
                                            <button type="submit" class="btn btn-primary btn-sm">
                                                <i class="fas fa-cart-plus me-1"></i>
                                                Add
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% empty %}
                        <div class="col-12 text-center py-5">
                            <p class="text-muted">No menu items found.</p>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Category Tabs -->
            {% for category in categories %}
                <div class="tab-pane fade" id="{{ category.slug }}" role="tabpanel" aria-labelledby="{{ category.slug }}-tab">
                    <div class="row g-4">
                        {% for item in items %}
                            {% if item.Category.slug == category.slug %}
                                <div class="col-md-6 col-lg-4 col-xl-3">
                                    <div class="menu-item card h-100 border-0 shadow-sm overflow-hidden">
                                        <!-- Item Image -->
                                        <div class="item-image position-relative overflow-hidden">
                                            {% if item.Image %}
                                                <img src="{{ item.Image.url }}" class="card-img-top" alt="{{ item.Item_name }}">
                                            {% else %}
                                                <img src="{% static 'images/default_item.png' %}" class="card-img-top" alt="No image available">
                                            {% endif %}
                                        </div>
                                        
                                        <!-- Item Details -->
                                        <div class="card-body d-flex flex-column">
                                            <h5 class="card-title fw-bold">{{ item.Item_name }}</h5>
                                            
                                            {% if item.description %}
                                                <p class="card-text text-muted flex-grow-1">{{ item.description }}</p>
                                            {% endif %}
                                            
                                            <div class="item-actions d-flex justify-content-between align-items-center mt-auto">
                                                <span class="price fw-bold text-primary">${{ item.Price }}</span>
                                                <form action="{% url 'add_to_cart' item.id %}" method="post" class="d-inline">
                                                    {% csrf_token %}
                                                    <button type="submit" class="btn btn-primary btn-sm">
                                                        <i class="fas fa-cart-plus me-1"></i>
                                                        Add
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% empty %}
                            <div class="col-12 text-center py-5">
                                <p class="text-muted">No items in this category.</p>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>

        <!-- View More Button -->
        <div class="row mt-5">
            <div class="col-12 text-center">
                <a href="{% url 'Menu' %}" class="btn btn-outline-primary btn-lg">View Full Menu</a>
            </div>
        </div>
    </div>
</section>
<!-- End Menu Section -->

<!-- Book Table Section -->
<section class="book-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <!-- Section Header -->
            <div class="col-12 text-center mb-5">
                <h2 class="section-title display-5 fw-bold">Book A Table</h2>
                <p class="section-subtitle lead text-muted">Reserve your spot for a memorable dining experience</p>
            </div>
            
            <!-- Booking Form -->
            <div class="col-lg-6 mb-4 mb-lg-0">
                <div class="booking-form card border-0 shadow-sm p-4">
                    <form action="{% url 'Book_Table' %}" method="POST">
                        {% csrf_token %}
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="user_name" class="form-label">Your Name</label>
                                <input type="text" class="form-control" id="user_name" name="user_name" required placeholder="Your Name">
                            </div>
                            <div class="col-md-6">
                                <label for="phone_number" class="form-label">Phone Number</label>
                                <input type="text" class="form-control" id="phone_number" name="phone_number" required placeholder="Phone Number">
                            </div>
                            <div class="col-12">
                                <label for="user_email" class="form-label">Email Address</label>
                                <input type="email" class="form-control" id="user_email" name="user_email" placeholder="Your Email">
                            </div>
                            <div class="col-md-6">
                                <label for="total_person" class="form-label">Number of Persons</label>
                                <select class="form-select" id="total_person" required name="total_person">
                                    <option value="" disabled selected>How many persons?</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6+</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="booking_date" class="form-label">Booking Date</label>
                                <input type="date" class="form-control" id="booking_date" required name="booking_date">
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary w-100 py-2">
                                    Book Now
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Map Section -->
            <div class="col-lg-6">
                <div class="map-container card border-0 shadow-sm overflow-hidden">
                    <div id="googleMap" class="map-placeholder" style="height: 400px;">
                        <!-- Google Maps will be loaded here -->
                        <div class="d-flex justify-content-center align-items-center h-100 bg-light">
                            <div class="text-center">
                                <i class="fas fa-map-marker-alt fa-3x text-muted mb-3"></i>
                                <p class="text-muted">Interactive Map Loading...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Book Table Section -->

<!-- Testimonials Section -->
<section class="testimonials-section py-5 bg-light">
    <div class="container">
        <!-- Section Header -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title display-5 fw-bold mb-3">What Our Customers Say</h2>
                <p class="section-subtitle lead text-muted">Hear from our satisfied diners</p>
            </div>
        </div>
        
        <!-- Testimonials Carousel -->
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="testimonials-carousel owl-carousel owl-theme">
                    {% for k in review %}
                        <div class="testimonial-item">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-body p-4">
                                    <div class="testimonial-content">
                                        <p class="testimonial-text mb-4">
                                            <i class="fas fa-quote-left text-primary me-2"></i>
                                            {{ k.Description }}
                                            <i class="fas fa-quote-right text-primary ms-2"></i>
                                        </p>
                                        
                                        <div class="testimonial-author d-flex align-items-center">
                                            <div class="author-image me-3">
                                                {% if k.Image %}
                                                    <img src="/media/{{ k.Image }}" alt="{{ k.User_name }}" class="rounded-circle" width="60" height="60">
                                                {% else %}
                                                    <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center text-white" style="width: 60px; height: 60px;">
                                                        <i class="fas fa-user fa-lg"></i>
                                                    </div>
                                                {% endif %}
                                            </div>
                                            <div class="author-info">
                                                <h6 class="mb-1 fw-bold">{{ k.User_name }}</h6>
                                                <div class="rating text-warning">
                                                    {% for i in "12345" %}
                                                        {% if forloop.counter <= k.Rating %}
                                                            <i class="fas fa-star"></i>
                                                        {% else %}
                                                            <i class="far fa-star"></i>
                                                        {% endif %}
                                                    {% endfor %}
                                                    <span class="text-muted ms-1">({{ k.Rating }}/5)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% empty %}
                        <div class="testimonial-item">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-body p-4 text-center">
                                    <i class="fas fa-comments display-1 text-muted mb-3"></i>
                                    <h5>No Reviews Yet</h5>
                                    <p class="text-muted">Be the first to share your experience!</p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Testimonials Section -->
{% endblock main %}

{% block extra_css %}
<!-- Home Page Specific CSS -->
<link href="{% static 'css/home.css' %}" rel="stylesheet">
{% endblock extra_css %}

{% block extra_js %}
<!-- Home Page Specific JavaScript -->
<script src="{% static 'js/home.js' %}"></script>
{% endblock extra_js %}